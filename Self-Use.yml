# HTTP 代理端口
port: 7890

# SOCKS5 代理端口
socks-port: 7891

# Linux 和 macOS 的 redir 代理端口 (如需使用此功能，请取消注释)
# redir-port: 7892

# 允许局域网的连接（可用来共享代理）
allow-lan: false

# 规则模式：Rule（规则） / Global（全局代理）/ Direct（全局直连）
mode: Rule

# 设置日志输出级别 (默认级别：info，级别越高日志输出量越大，越倾向于调试)
# 四个级别：silent / info / warning / error / debug
log-level: info

# Clash 的 RESTful API
external-controller: 127.0.0.1:9090

# you can put the static web resource (such as clash-dashboard) to a directory, and clash would serve in `${API}/ui`
# input is a relative path to the configuration directory or an absolute path
# external-ui: folder

# Secret for RESTful API (Optional)
# secret: ""

# experimental feature
experimental:
  ignore-resolve-fail: true # ignore dns reslove fail, default value is true

# DNS 设置
dns:
  enable: true # set true to enable dns (default is false)
  ipv6: false # default is false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip # redir-host or fake-ip
  # fake-ip-range: 198.18.0.1/16 # if you don't know what it is, don't change it
  nameserver:
   - 117.50.10.10
   - 119.29.29.29
   - 223.5.5.5
  # fallback: # concurrent request with nameserver, fallback used when GEOIP country isn't CN
   # - tls://8.8.4.4
   # - tls://1.0.0.1

# Clash for Windows
cfw-bypass:
  - qq.com
  - music.163.com
  - '*.music.126.net'
  - localhost
  - 127.*
  - 10.*
  - 172.16.*
  - 172.17.*
  - 172.18.*
  - 172.19.*
  - 172.20.*
  - 172.21.*
  - 172.22.*
  - 172.23.*
  - 172.24.*
  - 172.25.*
  - 172.26.*
  - 172.27.*
  - 172.28.*
  - 172.29.*
  - 172.30.*
  - 172.31.*
  - 192.168.*
  - <local>
cfw-latency-timeout: 5000

# 代理节点
Proxy:
# 更多协议配置示例：https://github.com/Dreamacro/clash/blob/master/README.md
# Shadowsocks
# 加密算法推荐：AEAD_AES_128_GCM AEAD_AES_192_GCM AEAD_AES_256_GCM AEAD_CHACHA20_POLY1305
- { name: "1", type: ss, server: 1.2.4.8, port: 443, cipher: AEAD_CHACHA20_POLY1305, password: "password" }
# Shadowsocks + OBFS
- name: "2"
  type: ss
  server: 1.2.4.8
  port: 443
  cipher: AEAD_CHACHA20_POLY1305
  password: "password"
  plugin: obfs
  plugin-opts:
    mode: tls # or http
    host: yunjiasu-cdn.net
# Shadowsocks + v2ray-plugin
- name: "3"
  type: ss
  server: 1.2.4.8
  port: 443
  cipher: AEAD_CHACHA20_POLY1305
  password: "password"
  plugin: v2ray-plugin
  plugin-opts:
    mode: websocket # no QUIC now
    # tls: true # wss
    # skip-cert-verify: true
    # host: bing.com
    # path: "/"
    # headers:
    #   custom: value
# V2Ray(WSS)
- { name: "4", type: vmess, server: v2ray.cool, port: 443, uuid: a3482e88-686a-4a58-8126-99c9df64b7bf, alterId: 32, cipher: auto, network: ws, ws-path: /v2ray.cool/, tls: true }

# 代理组策略
Proxy Group:
# 不同于 Surge，后面要用到的策略组要放到前面

# url-test 通过指定的 URL 测试并选择延迟最低的节点
- { name: "UrlTest", type: url-test, proxies: ["1", "2", "3","4"], url: "http://www.gstatic.com/generate_204", interval: 300 }

# fallback 通过指定的 URL 测试并选择可用的节点，当 1 故障不可用时自动切换到 2 以此类推
# - { name: "FallBack", type: fallback, proxies: ["1", "2", "3","4"], url: "http://www.gstatic.com/generate_204", interval: 300 }

# load-balance: 负载均衡
# - { name: "LoadBalance", type: load-balance, proxies: ["1", "2", "3", "4"], url: "http://www.gstatic.com/generate_204", interval: 300 }

# 代理节点选择
- { name: "PROXY", type: select, proxies: ["UrlTest", "1", "2", "3","4"] }

# 白名单模式 PROXY，黑名单模式 DIRECT
- { name: "Final", type: select, proxies: ["PROXY", "DIRECT"] }
- { name: "Apple", type: select, proxies: ["DIRECT", "PROXY"] }
- { name: "ForeignMedia", type: select, proxies: ["PROXY","1", "2", "3","4"] }
- { name: "DomesticMedia", type: select, proxies: ["DIRECT", "1", "2", "3","4"] }
- { name: "Hijacking", type: select, proxies: ["DIRECT", "REJECT"] }

# 自用规则补充
Rule:
- DOMAIN-KEYWORD,paypal,Paypal
- DOMAIN-SUFFIX,paypal.com,Paypal
- DOMAIN-SUFFIX,e-hentai.org,Eh
- DOMAIN-SUFFIX,exhentai.org,Eh
- SRC-IP-CIDR,192.168.1.146/32,DIRECT
- SRC-IP-CIDR,192.168.1.147/32,DIRECT
- IP-CIDR,52.74.50.242/32,DIRECT
